<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[七牛云回调鉴权问题]]></title>
    <url>%2F2017%2F11%2F06%2F%E4%B8%83%E7%89%9B%E4%BA%91%E5%9B%9E%E8%B0%83%E9%89%B4%E6%9D%83%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[问题描述使用七牛云存储遇到了很多坑，比如这个回调鉴权就废了很多时间，特此记录。七牛的回调鉴权主要是通过在请求头上中一个 AUTHORIZATION 的字段中的值来与本地生成的签名生成的值进行比对，如果相同，认证通过。HTTP协议中的 Authorization 请求消息头含有服务器用于验证用户代理身份的凭证，通常会在服务器返回401 Unauthorized 状态码以及WWW-Authenticate 消息头之后在后续请求中发送此消息头。 MDN web docs但是，在业务服务器上使用 $_SERVER[‘HTTP_AUTHORIZATION’] 总是获取不到这个字段的内容，通过提交工单和搜索相关问题发现好像是Apache配置的问题。 解决方案开启Apache配置中的rewrite，然后在入口目录中的.htaccess文件写入下面内容123#Authorization Headers RewriteCond %&#123;HTTP:Authorization&#125; ^(.+)$ RewriteRule .* - [E=HTTP_AUTHORIZATION:%&#123;HTTP:Authorization&#125;]]]></content>
      <tags>
        <tag>七牛云</tag>
        <tag>apache配置</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HEXO腾讯公益404的设置问题]]></title>
    <url>%2F2017%2F10%2F21%2Fhexo%E8%85%BE%E8%AE%AF%E5%85%AC%E7%9B%8A404%E7%9A%84%E8%AE%BE%E7%BD%AE%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[问题描述今天在捣鼓博客时想将404页面跳转到腾讯公益，复制next主题官网上的代码，发现在本地可以正常显示，但是当push到github上的时候，会出现样式文件无法加载的问题，next官网示例代码如下： 123456789101112131415161718&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv="content-type" content="text/html;charset=utf-8;"/&gt; &lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /&gt; &lt;meta name="robots" content="all" /&gt; &lt;meta name="robots" content="index,follow"/&gt; &lt;link rel="stylesheet" type="text/css" href="https://qzone.qq.com/gy/404/style/404style.css"&gt;&lt;/head&gt;&lt;body&gt; &lt;script type="text/plain" src="http://www.qq.com/404/search_children.js" charset="utf-8" homePageUrl="/" homePageName="回到我的主页"&gt; &lt;/script&gt; &lt;script src="https://qzone.qq.com/gy/404/data.js" charset="utf-8"&gt;&lt;/script&gt; &lt;script src="https://qzone.qq.com/gy/404/page.js" charset="utf-8"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 问题原因在知乎上看到有人说出现该问题的原因是github个人页强制使用https协议，而上面给的代码是http的，因此无法加载样式表。 解决方法NO.1使用购买的域名指向自己的github个人主页，增加CNAME文件，然后调用公益404页面不会出现混合内容那个问题。 NO.2使用如下代码：12345678910&lt;!DOCTYPE html&gt;&lt;html lang="zh-cn"&gt;&lt;head&gt;&lt;meta charset="UTF-8" /&gt;&lt;title&gt;404&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;script type="text/javascript" src="//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js" homePageName="返回宝贝回家" homePageUrl="http://www.baobeihuijia.com"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 腾讯寻人空间给出的方法]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
